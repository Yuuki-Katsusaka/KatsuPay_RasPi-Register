#:kivy 1.0.9

WindowManager:
    LoginWindow:
    CustomerWindow:
    StoreWindow:
    SalesWindow:
    CalculatorWindow:
    NFCWindow:
    QRWindow:


<Widget>:
    font_name: '/usr/share/fonts/truetype/takao-gothic/TakaoPGothic.ttf'


<LoginWindow>:
    name: 'login'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: '店舗アカウントIDを入力'
        BoxLayout:
            orientation: 'horizontal'
            Label:
                size_hint_x: 0.2
                text: '店舗ID'
            TextInput:
                id: login_id
                size_hint_x: 0.8
                text: ''
        BoxLayout:
            orientation: 'horizontal'
            Label:
                size_hint_x: 0.2
                text: 'パスワード'
            TextInput:
                id: login_pass
                size_hint_x: 0.8
                text: ''
        Button:
            text: 'OK'
            on_release: 
                root.checkID()


<CustomerWindow>:
    name: 'customer'
    BoxLayout:
        id: boxl
        orientation: 'horizontal'
        BoxLayout:
            orientation: 'vertical'
            Button:
                text: '支払う'
                on_release: 
                    root.press_PaymentButton()
                    root.manager.current = 'calculator'
                    root.manager.transition.direction = 'down'
            Button:
                text: 'チャージする'
                on_release: 
                    root.press_ChargeButton()
                    root.manager.current = 'calculator'
                    root.manager.transition.direction = 'down'
        BoxLayout:
            orientation: 'vertical'
            Button:
                text: '店舗用ページへ'
                on_release: 
                    root.manager.current = 'store'
                    root.manager.transition.direction = 'left'
            Button:
                text: '学生証の登録'
                on_release: 
                    root.manager.current = 'qr'


<StoreWindow>:
    name: 'store'
    BoxLayout:
        Button:
            text: '売上の確認'
            on_release: 
                root.manager.current = 'sales'
        Button:
            text: '販売者ページへ'
            on_release: 
                root.manager.current = 'customer'
                root.manager.transition.direction = 'right'

<SalesWindow>:
    name: 'sales'
    BoxLayout:
        orientation: 'vertical'
        Button:
            size_hint_y: 0.2
            text: '戻る'
            on_release: 
                root.manager.current = 'store'
        Label:
            size_hite_y: 0.2
            id: sales_price
            text: '売上金額：受信中．．．'        
        # ScrollVi/ew:
            # size_hint_y: 0.6
        TestLayout:
            id: tst
            size_hit_y: 0.6

<TestLayout>:
    orientation: 'vertical'
    # size_hint_y: None
    # height: self.minimum_height
    # Button:
    #     text: 'test'
    #     on_release:
    #         root.add_b()    

# <ProductsWindow>:
#     name: 'products'
#     TestLayout:



<CalculatorWindow>:
    name: 'calculator'
    BoxLayout:
        orientation: 'vertical'


        Label:
            text: '金額を入力してください'
        TextInput:
            id: display_input
            hint_text: '0'
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: '前のページへ戻る'
                on_release: 
                    root.manager.current = 'customer'
                    root.manager.transition.direction = 'up'
            GridLayout:
                cols: 3
                rows: 4

                NumberButton:
                    text: '7'
                    on_release: root.print_number(self.text)
                NumberButton:
                    text: '8'
                    on_release: root.print_number(self.text)
                NumberButton:
                    text: '9'
                    on_release: root.print_number(self.text)

                NumberButton:
                    text: '4'
                    on_release: root.print_number(self.text)
                NumberButton:
                    text: '5'
                    on_release: root.print_number(self.text)
                NumberButton:
                    text: '6'
                    on_release: root.print_number(self.text)

                NumberButton:
                    text: '1'
                    on_release: root.print_number(self.text)
                NumberButton:
                    text: '2'
                    on_release: root.print_number(self.text)
                NumberButton:
                    text: '3'
                    on_release: root.print_number(self.text)

                ClearButton:
                    text: 'C'
                    on_release: root.clear_display()
                NumberButton:
                    text: '0'
                    on_release: root.print_number(self.text)
                Button:
                    text: 'Enter'
                    on_release: 
                        root.press_enter()
                        root.manager.current = 'nfc'
                        root.manager.transition.direction = 'left'


<NumberButton@Button>:


<ClearButton@Button>:



<ErrorPop>:
    orientation: 'vertical'
    Label:
        text: 'エラーが発生しました．'
    BoxLayout:
        Button:
            text: 'メニューに戻る'
            on_release: root.closePopup()
            


<NFCWindow>:
    name: 'nfc'
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: nfc_label
            text: '学生証をリーダにタッチしてください'
        Button:
            text: 'メニューに戻る'
            on_release: 
                root.backWindow()


<QRWindow>:
    name: 'qr'
    BoxLayout:
        orientation: 'horizontal'
        BoxLayout:
            orientation: 'vertical'
            Label:
                id: qr_label
                text: '学生証をタッチしてください'
            Button:
                text: '戻る'
                on_release:
                    root.manager.current = 'customer'
        Image:
            id: qr_png
            source: ''
